<!doctype html>
<html>

<head>

	<meta charset="utf-8">
	<title>Login</title>

    <!-- CSS -->
	<link rel="stylesheet" href="../CSS/style.css">	
    <script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>

    <!-- JQuery -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

</head>
	
<div class="top">

	<!-- left items of navigation bar -->
	<div class="logo">
		<img src="../images/UoB_Logo.svg">
	</div>

</div>
<body>
    <div class="wrapper">

        <div class="bg-image"></div>

        <div class="form-box">
            <div class="button-box">
                <div id="btn"></div>
                <!--TO DO : Create the login() function for log in section (switches to login section of the form)-->
                <button type="button" id="login-top" class="toggle-btn" name = "username" onclick="login()"> Log In </button>
                <!--TO DO : Create the register() function for register button (switches to register section of the form)-->
                <button type="button" id="register-top" class="toggle-btn" name="password" onclick="register()">Register </button>
            </div>

            <h3> Baffle </h3>

            <!--Log in input fields and submit-->
            <form id="login" class="input-group" onsubmit="checkLogin(event)">
                <input type="text" class="input-field" name="username" placeholder="User ID or Email Address" required>
                <input type="text" class="input-field" name="password" placeholder="Password" required>
                <input type="checkbox" class="check-box"><span class="remember-password">Remember Password</span>
                <button type="submit" class="submit-btn">Login</button>
            </form>

             <!--Register input fields and submit-->
            <form id="register" class="input-group"> 
                <input type="text" class="input-field" placeholder="User ID" required>
                <input type="email" class="input-field" placeholder="Email ID" required>
                <input type="email" class="input-field" placeholder="Enter Password" required>
                <!--<label for="accomodations" class="input-field">Choose accomodation</label>-->
            
                <select name="accomodations" class="input-field" id="accomodations" placeholder="Choose accomodation" required>
                    <option disabled hidden selected>Select Accomodation</option>
                    <optgroup label="On Campus">
                        <option value="Brendon Court">Brendon Court</option>
                        <option value="Marlborough Court and Solsbury Court">Marlborough Court and Solsbury Court</option>
                        <option value="Norwood House">Norwood House</option>
                        <option value="Eastwood">Eastwood</option>
                        <option value="Osborne House">Osborne House</option>
                        <option value="Polden">Polden</option>
                        <option value="Polden Court">Polden Court</option>
                        <option value="The Quads">The Quads</option>
                        <option value="Westwood">Westwood</option>
                        <option value="Woodland Court">Woodland Court</option>
                    </optgroup>
                    <optgroup label="Off Campus">
                        <option value="Carpenter House">Carpenter House</option>
                        <option value="John Wood Building">John Wood Building</option>
                        <option value="John Wood Court">John Wood Court</option>
                        <option value="Green Park House">Green Park House</option>
                    </optgroup>
                </select>

                <input type="checkbox" class="check-box"><span class="terms-conditions">I agree to the Terms & Conditions</span>
                <button type="submit" class="submit-btn">Register</button>
            </form>
        </div>

    </div>

    <script>

        // sendData();
    var x = document.getElementById("login");
    var y = document.getElementById("register");
    var z = document.getElementById("btn");

    var a = document.getElementById("login-top");
    var b = document.getElementById("register-top");
    

    //Switches to register field
    function register(){
        x.style.left = "-400px";
        y.style.left = "50px";
        z.style.left = "110px";
        b.style.color = "#fff";
        a.style.color = "#18a964";
    }   

    //Switches to login field
    function login(){
        x.style.left = "50px";
        y.style.left = "450px"
        z.style.left = "0";
        a.style.color = "#fff";
        b.style.color = "#18a964";

    }


    function checkLogin(event){

        event.preventDefault(); //prevent submitting the form
        let form = $("#login");
        
        $.ajax({
            url: "/loginTest",   //url location of request handler
            type: "POST",   //Type of request
            data: form.serialize(),    //extract data from form
            dataType: "json",
            success: response => {  //If a response is received from server
                // console.log(response)
                if(response.status == "success"){
                    window.location.href = "Main.html";
                } else {
                    //pop up boxes
                    console.log("FAIL")
                }
            }
        });
    }


</script>
</body>
</html>